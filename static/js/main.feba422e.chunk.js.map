{"version":3,"sources":["firebaseInstance.js","components/AuthForm.js","routes/Auth.js","components/Tweet.js","components/TweetFactory.js","routes/Home.js","routes/Profile.js","components/Navigation.js","components/Router.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","auth","dbService","firestore","storageService","storage","AuthForm","data","actions","email","password","error","newAccount","onSubmit","onChange","toggleAccount","Form","name","type","placeholder","value","required","Error","Toggle","onClick","styled","span","div","form","Auth","useState","setEmail","setPassword","setNewAccount","setError","e","a","preventDefault","createUserWithEmailAndPassword","signInWithEmailAndPassword","message","onSocialClick","target","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","authData","authActions","prev","Buttons","Tweet","tweetObj","isOwner","onDeleteClick","onSubmitClick","isEditable","setEditable","text","newTweet","setNewTweet","handleToggleClick","attachmentUrl","src","alt","width","height","window","confirm","TweetFactory","tweet","attachment","onFileChange","onClearAttachment","maxLength","accept","Home","userObj","setTweet","tweets","setTweets","setAttachment","useEffect","collection","onSnapshot","snapshot","tweetArray","docs","map","doc","id","attachmentRef","ref","child","uid","uuidv4","putString","response","getDownloadURL","createdAt","Date","now","creatorId","add","console","log","handleDeleteClick","url","delete","refFromURL","handleSubmitClick","update","theFile","files","reader","FileReader","onloadend","finishedEvent","result","currentTarget","readAsDataURL","Profile","refreshUser","history","useHistory","displayName","setDisplayName","updateProfile","signOut","push","Navigation","to","isLoggedIn","exact","path","from","App","init","setInit","setUserObj","onAuthStateChanged","user","args","currentUser","Boolean","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.feba422e.chunk.js","sourcesContent":["import * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nconst firebaseConfig = {\n\tapiKey: process.env.REACT_APP_API_KEY,\n\tauthDomain: process.env.REACT_APP_AUTH_DOMAIN,\n\tdatabaseURL: process.env.REACT_APP_DATABASE_URL,\n\tprojectId: process.env.REACT_APP_PROJECT_ID,\n\tstorageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n\tmessagingSenderId: process.env.REACT_APP_MESSAGEING_SENDER_ID,\n\tappId: process.env.REACT_APP_APP_ID\n};\n\nfirebase.default.initializeApp(firebaseConfig);\n\nexport const firebaseInstance = firebase.default;\nexport const authService = firebaseInstance.auth();\nexport const dbService = firebaseInstance.firestore();\nexport const storageService = firebaseInstance.storage();\n","import React from 'react';\nimport styled from 'styled-components';\n\nfunction AuthForm({ data, actions }) {\n\tconst { email, password, error, newAccount } = data;\n\tconst { onSubmit, onChange, toggleAccount } = actions;\n\n\treturn (\n\t\t<>\n\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t<input\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvalue={newAccount ? 'Create Account' : 'Sign In'}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t\t<Error>{error}</Error>\n\t\t\t<Toggle onClick={toggleAccount}>\n\t\t\t\t{newAccount ? 'Sign In' : 'Create Account'}\n\t\t\t</Toggle>\n\t\t</>\n\t);\n}\n\nexport default AuthForm;\n\nconst Toggle = styled.span`\n\tdisplay: block;\n\twidth: 200px;\n\theight: 40px;\n\tmargin: 0 auto;\n\tborder-radius: 20px;\n\tcolor: #eeeeee;\n\ttext-align: center;\n\tbackground: #686d76;\n\tline-height: 40px;\n`;\n\nconst Error = styled.div`\n\tmargin: 16px 0 32px;\n\ttext-align: center;\n\tcolor: #ff414d;\n`;\nconst Form = styled.form`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n\tinput {\n\t\tmargin-bottom: 16px;\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n`;\n","import React, { useState } from 'react';\nimport { authService, firebaseInstance } from 'firebaseInstance';\nimport AuthForm from 'components/AuthForm';\nimport styled from 'styled-components';\n\nfunction Auth() {\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [newAccount, setNewAccount] = useState(true);\n\tconst [error, setError] = useState('');\n\n\tfunction onChange(e) {\n\t\tconst {\n\t\t\ttarget: { name, value }\n\t\t} = e;\n\t\tif (name === 'email') {\n\t\t\tsetEmail(value);\n\t\t} else if (name === 'password') {\n\t\t\tsetPassword(value);\n\t\t}\n\t}\n\n\tasync function onSubmit(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tif (newAccount) {\n\t\t\t\t// create account\n\t\t\t\tawait authService.createUserWithEmailAndPassword(email, password);\n\t\t\t} else {\n\t\t\t\tawait authService.signInWithEmailAndPassword(email, password);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetError(err.message);\n\t\t}\n\t}\n\n\tconst toggleAccount = () => setNewAccount(prev => !prev);\n\n\tconst onSocialClick = async e => {\n\t\tconst {\n\t\t\ttarget: { name }\n\t\t} = e;\n\t\tlet provider;\n\t\tif (name === 'google') {\n\t\t\tprovider = new firebaseInstance.auth.GoogleAuthProvider();\n\t\t} else if (name === 'github') {\n\t\t\tprovider = new firebaseInstance.auth.GithubAuthProvider();\n\t\t}\n\t\tawait authService.signInWithPopup(provider);\n\t};\n\n\tconst authData = { email, password, error, newAccount };\n\tconst authActions = { onSubmit, onChange, toggleAccount };\n\n\treturn (\n\t\t<div>\n\t\t\t<AuthForm data={authData} actions={authActions} />\n\t\t\t<Buttons>\n\t\t\t\t<button name=\"google\" onClick={onSocialClick}>\n\t\t\t\t\tContinue with Google\n\t\t\t\t</button>\n\t\t\t\t<button name=\"github\" onClick={onSocialClick}>\n\t\t\t\t\tContinue with Github\n\t\t\t\t</button>\n\t\t\t</Buttons>\n\t\t</div>\n\t);\n}\n\nexport default Auth;\n\nconst Buttons = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n\tbutton {\n\t\tmargin-top: 8px;\n\t}\n`;\n","import React, { useState } from 'react';\n\nfunction Tweet({ tweetObj, isOwner, onDeleteClick, onSubmitClick }) {\n\tconst [isEditable, setEditable] = useState(false);\n\tconst [newTweet, setNewTweet] = useState(tweetObj.text);\n\n\tconst handleDeleteClick = () => {\n\t\tconst ok = window.confirm('Are you sure?');\n\t\tif (ok) {\n\t\t\tonDeleteClick(tweetObj.attachmentUrl);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tconst handleToggleClick = () => setEditable(prev => !prev);\n\n\tconst onSubmit = e => {\n\t\te.preventDefault();\n\t\tonSubmitClick(newTweet);\n\t\thandleToggleClick();\n\t};\n\n\tconst onChange = e => {\n\t\tconst {\n\t\t\ttarget: { value }\n\t\t} = e;\n\t\tsetNewTweet(value);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{isEditable ? (\n\t\t\t\t<>\n\t\t\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={newTweet}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\tplaceholder=\"new tweet\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input type=\"submit\" value=\"Update Tweet\" />\n\t\t\t\t\t</form>\n\t\t\t\t\t<button onClick={handleToggleClick}>Cancel</button>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<div>\n\t\t\t\t\t<h4>{tweetObj.text}</h4>\n\t\t\t\t\t{tweetObj.attachmentUrl && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={tweetObj.attachmentUrl}\n\t\t\t\t\t\t\talt=\"tweet attachment\"\n\t\t\t\t\t\t\twidth=\"50px\"\n\t\t\t\t\t\t\theight=\"50px\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isOwner && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<button onClick={handleDeleteClick}>Delete</button>\n\t\t\t\t\t\t\t<button onClick={handleToggleClick}>Edit</button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Tweet;\n","import React from 'react';\n\nfunction TweetFactory({ data, actions }) {\n\tconst { tweet, attachment } = data;\n\tconst { onSubmit, onChange, onFileChange, onClearAttachment } = actions;\n\n\treturn (\n\t\t<form onSubmit={onSubmit}>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tplaceholder=\"무슨 일이 일어나고 있나요?\"\n\t\t\t\tmaxLength={120}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={tweet}\n\t\t\t/>\n\t\t\t<input type=\"file\" accept=\"image/*\" onChange={onFileChange} />\n\t\t\t<input type=\"submit\" value=\"Tweet\" />\n\t\t\t{attachment && (\n\t\t\t\t<div>\n\t\t\t\t\t<img src={attachment} alt=\"attachment\" width=\"50px\" height=\"50px\" />\n\t\t\t\t\t<button onClick={onClearAttachment}>Clear</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</form>\n\t);\n}\n\nexport default TweetFactory;\n","import React, { useState, useEffect } from 'react';\nimport { dbService, storageService } from 'firebaseInstance';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport Tweet from 'components/Tweet';\nimport TweetFactory from 'components/TweetFactory';\n\nfunction Home({ userObj }) {\n\tconst [tweet, setTweet] = useState('');\n\tconst [tweets, setTweets] = useState([]);\n\tconst [attachment, setAttachment] = useState('');\n\n\tuseEffect(() => {\n\t\tdbService.collection('tweets').onSnapshot(snapshot => {\n\t\t\tconst tweetArray = snapshot.docs.map(doc => ({\n\t\t\t\t...doc.data(),\n\t\t\t\tid: doc.id\n\t\t\t}));\n\t\t\tsetTweets(tweetArray);\n\t\t});\n\t}, []);\n\n\tconst onSubmit = async e => {\n\t\te.preventDefault();\n\t\tlet attachmentUrl = '';\n\n\t\tif (attachment !== '') {\n\t\t\tconst attachmentRef = storageService\n\t\t\t\t.ref()\n\t\t\t\t.child(`${userObj.uid}/${uuidv4()}`);\n\t\t\tconst response = await attachmentRef.putString(attachment, 'data_url');\n\t\t\tattachmentUrl = await response.ref.getDownloadURL();\n\t\t}\n\n\t\tconst tweetObj = {\n\t\t\ttext: tweet,\n\t\t\tcreatedAt: Date.now(),\n\t\t\tcreatorId: userObj.uid,\n\t\t\tattachmentUrl\n\t\t};\n\n\t\ttry {\n\t\t\tawait dbService.collection('tweets').add(tweetObj);\n\n\t\t\tsetTweet('');\n\t\t\tsetAttachment('');\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tconst onChange = e => {\n\t\tconst {\n\t\t\ttarget: { value }\n\t\t} = e;\n\t\tsetTweet(value);\n\t};\n\n\tconst onFileChange = e => {\n\t\tconst {\n\t\t\ttarget: { files }\n\t\t} = e;\n\t\tconst theFile = files[0];\n\t\tconst reader = new FileReader();\n\t\treader.onloadend = function (finishedEvent) {\n\t\t\tconst {\n\t\t\t\tcurrentTarget: { result }\n\t\t\t} = finishedEvent;\n\t\t\tsetAttachment(result);\n\t\t};\n\t\treader.readAsDataURL(theFile);\n\t};\n\n\tconst onClearAttachment = () => setAttachment(null);\n\n\tconst handleDeleteClick = async (id, url) => {\n\t\ttry {\n\t\t\tawait dbService.doc(`tweets/${id}`).delete();\n\t\t\tawait storageService.refFromURL(url).delete(); // image path\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tconst handleSubmitClick = async (id, newTweet) => {\n\t\ttry {\n\t\t\tawait dbService.doc(`tweets/${id}`).update({\n\t\t\t\ttext: newTweet\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tconst data = {\n\t\ttweet,\n\t\tattachment\n\t};\n\n\tconst actions = {\n\t\tonSubmit,\n\t\tonChange,\n\t\tonFileChange,\n\t\tonClearAttachment\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<TweetFactory data={data} actions={actions} />\n\t\t\t<div>\n\t\t\t\t{tweets.map(tweet => (\n\t\t\t\t\t<Tweet\n\t\t\t\t\t\tkey={tweet.id}\n\t\t\t\t\t\ttweetObj={tweet}\n\t\t\t\t\t\tisOwner={tweet.creatorId === userObj.uid}\n\t\t\t\t\t\tonDeleteClick={url => handleDeleteClick(tweet.id, url)}\n\t\t\t\t\t\tonSubmitClick={newTweet => handleSubmitClick(tweet.id, newTweet)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Home;\n","import React, { useState } from 'react';\nimport { authService } from 'firebaseInstance';\nimport { useHistory } from 'react-router-dom';\n\nfunction Profile({ refreshUser, userObj }) {\n\tconst history = useHistory();\n\tconst [displayName, setDisplayName] = useState(userObj.displayName);\n\n\tconst onLogOutClick = () => {\n\t\tauthService.signOut();\n\t\thistory.push('/');\n\t};\n\n\tconst onChange = e => {\n\t\tconst {\n\t\t\ttarget: { value }\n\t\t} = e;\n\t\tsetDisplayName(value);\n\t};\n\n\tconst onSubmit = async e => {\n\t\te.preventDefault();\n\t\tif (displayName !== userObj.displayName) {\n\t\t\tawait userObj.updateProfile({\n\t\t\t\tdisplayName\n\t\t\t});\n\t\t\trefreshUser();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Display Name\"\n\t\t\t\t\tvalue={displayName}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t/>\n\t\t\t\t<input type=\"submit\" placeholder=\"Update Profile\" />\n\t\t\t</form>\n\t\t\t<button onClick={onLogOutClick}>Log out</button>\n\t\t</>\n\t);\n}\n\nexport default Profile;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Navigation({ userObj }) {\n\treturn (\n\t\t<nav>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<Link to=\"/\">Home</Link>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<Link to=\"/profile\">{userObj.displayName}의 Profile</Link>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n\nexport default Navigation;\n","import React from 'react';\nimport {\n\tHashRouter as Router,\n\tRoute,\n\tSwitch,\n\tRedirect\n} from 'react-router-dom';\nimport Auth from 'routes/Auth';\nimport Home from 'routes/Home';\nimport Profile from 'routes/Profile';\nimport Navigation from 'components/Navigation';\n\nexport default ({ refreshUser, isLoggedIn, userObj }) => {\n\treturn (\n\t\t<Router>\n\t\t\t{isLoggedIn && <Navigation userObj={userObj} refreshUser={refreshUser} />}\n\t\t\t<Switch>\n\t\t\t\t{isLoggedIn ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t\t<Home userObj={userObj} />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/profile\">\n\t\t\t\t\t\t\t<Profile userObj={userObj} refreshUser={refreshUser} />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Redirect from=\"*\" to=\"/\" />\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t\t<Auth />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Redirect from=\"*\" to=\"/\" />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n};\n","import { useState, useEffect } from 'react';\nimport { authService } from 'firebaseInstance';\nimport AppRouter from 'components/Router';\nimport 'style.css';\n\nfunction App() {\n\tconst [init, setInit] = useState(false);\n\tconst [userObj, setUserObj] = useState(null);\n\n\tuseEffect(() => {\n\t\tauthService.onAuthStateChanged(user => {\n\t\t\tif (user) {\n\t\t\t\tsetUserObj({\n\t\t\t\t\tuid: user.uid,\n\t\t\t\t\tdisplayName: user.displayName,\n\t\t\t\t\tupdateProfile: args => user.updateProfile(args)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetUserObj(null);\n\t\t\t}\n\t\t\tsetInit(true);\n\t\t});\n\t}, []);\n\n\tconst refreshUser = () => {\n\t\tconst user = authService.currentUser;\n\t\tsetUserObj({\n\t\t\tuid: user.uid,\n\t\t\tdisplayName: user.displayName,\n\t\t\tupdateProfile: args => user.updateProfile(args)\n\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{init ? (\n\t\t\t\t<AppRouter\n\t\t\t\t\trefreshUser={refreshUser}\n\t\t\t\t\tisLoggedIn={Boolean(userObj)}\n\t\t\t\t\tuserObj={userObj}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t'Initializing...'\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}